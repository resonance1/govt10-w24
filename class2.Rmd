---
title: "Class 2"
author: "Your name here"
output:
  word_document: default
  pdf_document: default
  html_document:
    df_print: paged
---

```{r setup, echo=F}
library(knitr)
opts_chunk$set(tidy.opts = list(width.cutoff = 60), tidy = TRUE)
knitr::opts_chunk$set(error = TRUE)
```

# Class Plan
-   Office hours / opening the problem set
-   R tutorial: Variables
-   R tutorial: Intro to dataframes
-   Group work

# Variables

R can save information as a variable using the following syntax: *variable name <- value*

Let's create a variable named my_variable, with the value of 13.

```{r}

```

We can also use '=' to create a variable

```{r}

```

Get the value of the variable *my_variable* by typing the variable name

```{r}

```

There are some limits to variable names. Don't use spaces, or (most) punctuation. Dots, dashes, underscores are fine. 

```{r}

```

We can input variable names into functions. Let's take the natural log of *my_variable*

Note: There are many helpful lists of functions online: <https://www.statmethods.net/management/functions.html>

```{r}

```

Let's change the value of *my_variable* by overwriting it

```{r}

```

Now let's copy the variable *my_variable* to a new variable called *my_variable2*

```{r}

```

We can perform mathematical operations directly on variables

```{r}

```


## String (text) variables

We can also store text within variables by wrapping the text in double quotation marks (""). Let's create a new variable called my_text that contains the words "gov 10"

```{r}

```

We can't perform mathematical operations on text

```{r}

```

# Data frames

Data frames are similar to a spreadsheet, and contain multiple observations (rows) and variables (columns). We'll also call them "data sets" in this course

## Loading data frames

For this class, all data are stored in .csv format. Let's load enrollments.csv. There are two ways we can do this.

A)  Sync git, then read in the file:

```{r}
enrollments <- read.csv("./class_data/enrollments.csv")
```

B)  Download the file from the internet into your current directory and load it:

```{r}
download.file("https://raw.githubusercontent.com/resonance1/govt10-w24/main/class_data/enrollments.csv" ,"./enrollments.csv")
enrollments <- read.csv("enrollments.csv")
```

## Data frames and variables

We can see the variable names in our data frame using *names()*

```{r}

```

We can select columns in a dataframe by name using the *\$* operator. When using the *\$* operator we place the name of the data frame to the left and the name of the variable to the right.

Let's pull out the variable *school*

```{r}

```

Confusingly, variable names can be similar to data frame names. Let's pull out the variable *enrollment*

```{r}

```

To create a new column in our data frame, we can also use the *\$* operator. If we pass it a single value, that value will be placed within every row.

```{r}

```

We can also create variables that are combinations of existing variables in the dataset:

```{r}

```

We can run functions on columns:

```{r}

```


## Pulling out specific columns and rows

R has a package called tidyverse, which makes working with data frames easier. First, install tidyverse:

```{r}
install.packages("tidyverse")
```

Next, load the package

```{r}
library(tidyverse)
```

Tidyverse functions use the pipe command: %>% 

The select() function pulls in the columns that we want. 

The syntax is:
dataframe %>% select(column_name)

```{r}

```

We can save the results as a new data frame:

```{r}

```

One of the most useful functions is filter(), which returns just the rows that match some criteria. Let's filter to schools in Virginia. To do so, we are going to use == to match a specific value. We use == rather than =, so that R knows we are not trying to create a new variable.

The syntax is:
dataframe %>% filter(variable name == "something")

```{r}

```

We can also use %>% filter() to match numeric values

```{r}

```


## Group work 

Let's assume that class sizes (freshmen, sophomores, etc) are equal. Create a new variable in the dataset containing the size of the freshman class at each school. This can be done in 1 line of code.

```{r}

```

Since we are talking about people, we should not use decimals. Update the code above to use the *floor()* function to round your freshman class size variable to the nearest integer. Overwrite the variable you previously created.

```{r}

```

Using the new variable, calculate the average size of the freshman class within the entire dataset. Then calculate the median size. 

```{r}

```

Using tidyverse, calculate the average size of the freshman class, for all universities in Florida.

```{r}

```

If you have time remaining, you can begin your problem set.

## Optional Resources

Canvas/Files/Data Analysis Chapter 1
  - Covers using R and basic operations

https://r4ds.hadley.nz/workflow-basics
  - Covers basic R syntax
  
https://datacarpentry.org/R-ecology-lesson/03-dplyr.html
  - Covers basic tidyverse commands (only read through the "Pipes" section) 
  
## Check-in

1.  On a scale ranging between 1 (Too Hard) and 10 (Too Easy), how was today's class:
2.  What was the easiest thing to understand?
3.  What was the most difficult thing to understand?
